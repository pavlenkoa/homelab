# external-secrets configuration for homelab cluster
# Environment-specific overrides only

external-secrets:
  # ClusterSecretStore for Vault backend
  extraObjects:
    - |
      apiVersion: external-secrets.io/v1
      kind: ClusterSecretStore
      metadata:
        name: vault-backend
        annotations:
          argocd.argoproj.io/sync-wave: "10"  # Apply after CRDs and deployments (wave 0)
      spec:
        provider:
          vault:
            server: "http://vault.vault.svc.cluster.local:8200"
            path: "kv"
            version: "v2"
            auth:
              kubernetes:
                mountPath: "kubernetes"
                role: "external-secrets"
                serviceAccountRef:
                  name: "external-secrets"
                  namespace: "external-secrets"
