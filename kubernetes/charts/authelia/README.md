# Authelia

Authentication portal for homelab services.

## Credentials

Admin credentials are automatically generated by the pre-install job and stored in Vault at `kv/authelia`:

- **Username:** `admin`
- **Password:** Retrieved from Vault (`admin_password` key)

To get the admin password:
```bash
kubectl exec -n vault vault-0 -- vault kv get -field=admin_password kv/authelia
```

## First Login Setup

1. Navigate to https://auth.pavlenko.io
2. Login with admin credentials
3. You'll be prompted to add **WebAuthn Credentials** (security key/passkey)
4. During registration, Authelia requires identity verification via One-Time Code

## Getting the One-Time Code

Since this setup uses filesystem notifier (not SMTP), OTP codes are written to a file inside the pod:

```bash
kubectl exec -n authelia authelia-0 -- cat /config/notification.txt
```

The file contains the verification link/code. Use this to complete WebAuthn registration.

## Architecture

- **Authentication:** File-based users database
- **Storage:** SQLite (local)
- **Session:** Redis
- **Notifier:** Filesystem (no email)
- **Secrets:** External Secrets from Vault
